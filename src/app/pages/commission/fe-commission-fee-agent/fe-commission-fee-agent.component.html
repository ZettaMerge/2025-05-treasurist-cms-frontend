<div class="_g-header">
  <h1 class="_g-title-header">Agent Fee Report</h1>
</div>

<!--SECTION FILTER-->
<div class="card">
  <div class="card-body">
    <div class="row">
      <div class="col-5">
        <div class="form-group">
          <label class="col-form-label">ค้นหา</label>
          <div class="form-input">
            <input
              type="text"
              id="search"
              name="search"
              class="form-control"
              placeholder="ชื่อ หรือ IC License"
              [(ngModel)]="filter.search"
              (ngModelChange)="searchTextChange($event)"
            >
          </div>
        </div>
      </div>
      <div class="col-7 d-flex">
        <div class="col-4 pl-0">
          <div class="form-group">
            <label class="col-form-label">Team.</label>
            <div class="form-input">
              <shared-team-dropdown
                placeholder="Team"
                [(ngModel)]="filter.team"
                (ngModelChange)="filterChange()"
              >
              </shared-team-dropdown>
            </div>
          </div>
        </div>
        <div class="col-8">
          <div class="form-group">
            <label class="col-form-label">ช่วงวันที่ทำรายการ</label>
            <div class="d-flex">
              <div class="flex-1">
                <pn-date-range-picker
                  placeholder="dd/mm/yyyy - dd/mm/yyyy"
                  [(ngModel)]="filter.dateRange"
                  (ngModelChange)="filterChange()"
                >
                </pn-date-range-picker>
              </div>
              <div class="_g-btn-clear">
                <button
                  type="button"
                  class="btn btn-clear btn-lg mr-1 mb-1"
                  (click)="clearFilter()"
                >ล้าง
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--SECTION FILTER-->

<!--SECTION LIST-->
<div class="card">
  <div class="card-body">
    <div
      class="col-12"
      *ngIf="rows && rows?.length === 0"
    >
      <pn-data-not-found>
      </pn-data-not-found>
    </div>
    <div [hidden]="rows && rows?.length === 0">
      <div class="d-flex justify-content-between">
        <div class="col-6 px-0">
          <pn-grid-per-page
            [page]="page"
            (setPerPage)="grid.setPerPage($event)"
          ></pn-grid-per-page>
        </div>
      </div>
      <div class="_g-table-container">
        <pn-lib-grid
          #grid
          [sort]="{ prop: 'agentName', asc: false }"
          [bodyHeight]="'auto'"
          [dataSub]="dataSub"
          [rows]="rows"
          [columns]="columns"
          [rowHeight]="65"
          [externalPaging]="true"
          [(page)]="page"
          (pageChange)="pageChange()"
          (sortChange)="onSortChange($event)"
          (detailInfo)="detailInfo($event)"
        ></pn-lib-grid>
      </div>
    </div>
  </div>
</div>
<!--SECTION LIST-->

<ng-template
  #nameTpl
  let-value="value"
  let-row="row"
>
  <span *ngIf="row.firstName && row.lastName">{{row.firstName}} {{row.lastName}}</span>
  <span *ngIf="!row.firstName && !row.lastName">-</span>
</ng-template>
